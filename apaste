#!/bin/bash
LOCATION=$(dirname "$0")
source $LOCATION/common_tools
android_choose_device

escape_spaces(){
  ESCAPED_TEXT=`echo "$1" | sed -e 's/ /\%s/g'`
}

send_text(){
  escape_spaces "$1"
  adb -s $SELECTED_DEVICE shell "input text '$ESCAPED_TEXT'"
}

if [ -n "$1" ]
then
    TEXT=$1
else
    read -p "üìù Enter text you want to insert: " TEXT
fi

if [ "$#" -gt 1 ];
then
  for ARGUMENT in "$@"
  do
    send_text "$ARGUMENT"
    sleep 0.5
	  if ! [ $ARGUMENT = ${@:$#} ]; then #if not last argument, jump to next field
	   adb -s $SELECTED_DEVICE shell input keyevent 61
	  fi
  done
else
  send_text "$TEXT"
fi
