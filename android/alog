#!/bin/bash
LOCATION=$(dirname "$0")
source $LOCATION/../common_tools
android_choose_device

filter_by_package(){
  android_is_package_installed "$1"
  echo "üîç Filtering by package name: $1"
  PID=`adb shell ps | grep -i "$1" | cut -c10-15`;
  adb logcat | grep $PID
}

raw_log(){
  echo "üìú Device log:"
  adb -s $SELECTED_DEVICE logcat
}

if [ $# -eq 0 ]; then
  read -p "üî¨ Insert package name (Android 7+) or leave empty to proceed: " PACKAGE
  if [ -z "$PACKAGE" ]; then
    raw_log
    exit
  fi
else
  PACKAGE="$1"
fi

filter_by_package $PACKAGE
