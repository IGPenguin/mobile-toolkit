#!/bin/bash
location=$(dirname "$0")
source $location/device_chooser
choose_device

echo "Taking screenshot from $SELECTED_DEVICE"
adb -s $SELECTED_DEVICE shell screencap -p /mnt/sdcard/output.png
if [ -z "$1" ] ; then
  adb -s $SELECTED_DEVICE pull /mnt/sdcard/output.png ~/Desktop/screenshot-$(date +%Y-%m-%d-%H-%M-%S).png
else
  adb -s $SELECTED_DEVICE pull /mnt/sdcard/output.png ~/Desktop/$1.png
fi
adb -s $SELECTED_DEVICE shell rm /mnt/sdcard/output.png
